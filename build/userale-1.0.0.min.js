!function(t){"use strict";function e(t){if(t.timeStamp&&t.timeStamp>0){var e,n=Date.now()-t.timeStamp;if(n<0)e=function(){return t.timeStamp/1e3};else if(n>t.timeStamp){var o=performance.timing.navigationStart;e=function(t){return t+o}}else e=function(t){return t}}else e=function(){return Date.now()};return e}function n(t,e){Object.keys(e).forEach(function(n){if("userFromParams"===n){var r=o(e[n]);r&&(t.userId=r)}t[n]=e[n]})}function o(t){var e=t,n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),o=window.location.href.match(n);return o&&o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):null}function r(t){F=t}function u(t){R=t}function a(t,e){if(!T.on)return!1;var n=null;e&&(n=e(t));var o=i(t.timeStamp&&t.timeStamp>0?T.time(t.timeStamp):Date.now()),r={target:c(t.target),path:d(t),clientTime:o.milli,microTime:o.micro,location:s(t),type:t.type,logType:"raw",userAction:!0,details:n,userId:T.userId,toolVersion:T.version,toolName:T.toolName,useraleVersion:T.useraleVersion,sessionID:T.sessionID};return!("function"==typeof F&&!F(r))&&("function"==typeof R&&(r=R(r)),D.push(r),!0)}function i(t){return{milli:Math.floor(t),micro:Number((t%1).toFixed(3))}}function l(t){var e=c(t.target),n=d(t),o=t.type,r=Math.floor(t.timeStamp&&t.timeStamp>0?T.time(t.timeStamp):Date.now());if(null==k&&(k=e,C=o,K=n,L=r,x=0),k!==e||C!==o){if(V={target:k,path:K,count:x,duration:r-L,startTime:L,endTime:r,type:C,logType:"interval",targetChange:k!==e,typeChange:C!==o,userAction:!1,userId:T.userId,toolVersion:T.version,toolName:T.toolName,useraleVersion:T.useraleVersion,sessionID:T.sessionID},"function"==typeof F&&!F(V))return!1;"function"==typeof R&&(V=R(V)),D.push(V),k=e,C=o,K=n,L=r,x=0}return k==e&&C==o&&(x+=1),!0}function s(t){return null!=t.pageX?{x:t.pageX,y:t.pageY}:null!=t.clientX?{x:document.documentElement.scrollLeft+t.clientX,y:document.documentElement.scrollTop+t.clientY}:{x:null,y:null}}function c(t){return t.localName?t.localName+(t.id?"#"+t.id:"")+(t.className?"."+t.className:""):t.nodeName?t.nodeName+(t.id?"#"+t.id:"")+(t.className?"."+t.className:""):t&&t.document&&t.location&&t.alert&&t.setInterval?"Window":"Unknown"}function d(t){var e=[];if(t.path)e=t.path;else for(var n=t.target;n;)e.push(n),n=n.parentElement;return f(e)}function f(t){for(var e,n=0,o=[];e=t[n];)o.push(c(e)),++n;return o}function m(t){return{clicks:t.detail,ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey,meta:t.metaKey}}function p(t){X={click:m,dblclick:m,mousedown:m,mouseup:m,focus:null,blur:null,input:t.logDetails?function(t){return{value:t.target.value}}:null,change:t.logDetails?function(t){return{value:t.target.value}}:null,dragstart:null,dragend:null,drag:null,drop:null,keydown:t.logDetails?function(t){return{key:t.keyCode,ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey,meta:t.metaKey}}:null,mouseover:null,submit:null},O={},j={wheel:function(t){return{x:t.deltaX,y:t.deltaY,z:t.deltaZ}},scroll:function(){return{x:window.scrollX,y:window.scrollY}},resize:function(){return{width:window.outerWidth,height:window.outerHeight}}}}function h(t){return p(t),Object.keys(X).forEach(function(t){document.addEventListener(t,function(e){a(e,X[t])},!0)}),Y.forEach(function(t){document.addEventListener(t,function(t){l(t)},!0)}),Object.keys(j).forEach(function(e){O[e]=!0,window.addEventListener(e,function(n){O[e]&&(O[e]=!1,a(n,j[e]),setTimeout(function(){O[e]=!0},t.resolution))},!0)}),A.forEach(function(t){window.addEventListener(t,function(t){a(t,function(){return{window:!0}})},!0)}),!0}function g(t,e){null!==B&&clearInterval(B),B=v(t,e),y(t,e)}function v(t,e){return setInterval(function(){e.on&&t.length>=e.logCountThreshold&&(w(t.slice(0),e.url,0),t.splice(0))},e.transmitInterval)}function y(t,e){e.on&&(navigator.sendBeacon?window.addEventListener("unload",function(){navigator.sendBeacon(e.url,JSON.stringify(t))}):window.addEventListener("beforeunload",function(){t.length>0&&w(t,e.url,1)}))}function w(t,e,n){var o=new XMLHttpRequest,r=JSON.stringify(t);o.open("POST",e),o.setRequestHeader("Content-type","application/json;charset=UTF-8"),o.onreadystatechange=function(){4===o.readyState&&200!==o.status&&n>0&&w(t,e,n--)},o.send(r)}function S(e){t.started||setTimeout(function(){var n=document.readyState;"interactive"===n||"complete"===n?(h(e),g(M,e),t.started=e.on=!0):S(e)},100)}function E(){t.started||S(H),H.on=!0}function I(){H.on=!1}function N(t){return void 0!==t&&n(H,t),H}function b(t){return null!==t&&"object"==typeof t&&(M.push(t),!0)}var D,T,k,C,K,L,x,V,X,O,j,F=null,R=null,Y=["click","focus","blur","input","change","mouseover","submit"],A=["load","blur","focus"],B=null,H={},M=[];t.started=!1,H.on=!1,H.useraleVersion="1.0.0",n(H,function(){var t={},n=document.currentScript||function(){var t=document.getElementsByTagName("script");return t[t.length-1]}(),o=n?n.getAttribute.bind(n):function(){return null};return t.autostart="false"!==o("data-autostart"),t.url=o("data-url")||"http://localhost:8000",t.transmitInterval=+o("data-interval")||5e3,t.logCountThreshold=+o("data-threshold")||5,t.userId=o("data-user")||null,t.version=o("data-version")||null,t.logDetails="true"===o("data-log-details"),t.resolution=+o("data-resolution")||500,t.toolName=o("data-tool")||null,t.userFromParams=o("data-user-from-params")||null,t.time=e(document.createEvent("CustomEvent")),t.sessionID=o("data-session")||"session_"+String(Date.now()),t}()),function(t,e){D=t,T=e,F=null,R=null,k=null,C=null,K=null,L=null,x=0,V=null}(M,H),H.autostart&&S(H);t.version="1.0.0",t.start=E,t.stop=I,t.options=N,t.log=b,t.map=u,t.filter=r}(this.userale=this.userale||{});